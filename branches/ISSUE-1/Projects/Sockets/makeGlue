CC = gcc
RL-Glue = ../../RL-Glue
RL-Sockets = $(RL-Glue)/Sockets/

# We need to search the RL-Glue directory for RL_Interface.h 
CFLAGS = -I$(RL-Glue)/ -I$(RL-Sockets) -ansi -pedantic -Wall

all: Glue Agent Environment Benchmark
	$(CC) -o RL_main Build/RL_Interface.o Build/RLnet.o Build/RLnet_glue_agent.o Build/mines.o Build/main.o

Glue: RL_Interface.o
Agent: RLnet.o RLnet_glue_agent.o
Environment: mines.o
Benchmark: main.o

RL_Interface.o: $(RL-Glue)/RL_Interface.c $(RL-Glue)/RL_Interface.h
	$(CC) -c $(CFLAGS) $< -o Build/RL_Interface.o

RLnet_glue_agent.o: $(RL-Sockets)/Glue/RLnet_glue_agent.c
	$(CC) -c $(CFLAGS) $< -o Build/RLnet_glue_agent.o

RLnet.o: $(RL-Glue)/Sockets/RLnet/RLnet.c
	$(CC) -c $(CFLAGS) $< -o Build/RLnet.o

mines.o: ./Environment/mines.c ./Environment/mines.h
	$(CC) -c $(CFLAGS) $< -o Build/mines.o

main.o: ./Benchmark/main.c
	$(CC) -c $(CFLAGS) $< -o Build/main.o

clean:
	rm -fr Build/*.o
	rm -fr RL_main

tidy:
	rm -fr *.*~
	rm -fr *~
	rm -fr \#*
